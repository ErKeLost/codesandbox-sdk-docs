---
title: Repository Setup + Tips & Tricks
description: This guide is the first step to get started with CodeSandbox for your repo. It's a walk-through with a bunch of tips and tricks on how to get the most out of CodeSandbox!
---

import { Callout } from 'nextra-theme-docs'


# Setting up a repository with Codesandbox

## Import a repository

If you haven't already imported a repository, you can do so by navigating to the Recent page in the dashboard and clicking ‚ÄúImport from GitHub‚Äù.

If you have already granted GH OAuth permissions, you will see a list of GitHub organizations that you are a part of. 
Select the organization containing the repository that you want to import and select the desired repo. If you don't see your repository, you may need to insert the github url into the input field (e.g. ‚Äúcodesandbox/test-sandbox‚Äù). 

<Callout emoji="üí°">OAuth permissions allow CodeSandbox to list the repositories you have access to as well as permsision to execute git actions that allows the editor to stay up-to-date as you code.</Callout>


## Opening the repository

The first time when you import a repo, it can take a while. During first-time setup, we clone the repository into the VM and set up the folders for the project. However, after this setup, we will create a memory snapshot of the VM, which will ensure that all the following VM loads (& clones!) will be fast.

Next, let's take a look at the editor setup!

## Repository & workflow setup

### Branching flow

CodeSandbox has an opinionated flow when it comes to working with repositories, and you can see hints of this in the editor.

As soon as you enter the editor, you will see the current branch name in the header. Every branch has its own VM and is available through a unique URL. For example, if two people visit the URL for the `main` branch, they will be able to see each other's cursor, terminals and DevTools.

<Callout emoji="üí°">URLs for branches are predictable. So, if you want to open a specific branch, you can update the URL with the new branch name, and we'll import & create an environment for that branch automatically.</Callout>

On CodeSandbox, the `main` branch is protected by default. This means that it's read-only and will sync automatically with the branch on GitHub when new commits come in.

To write some code, you have three options:
1. (Recommended) Just start typing some code - we will create a new branch for you using seamless branching!
2. Click the ‚ÄúBranch‚Äù button in the header.
3. [Toggle protection off](/learn/environment/branch-protection) for the `main` branch.

When we create the new branch, we create a clone of the `main` VM and switch it to the new branch. This new VM is an _exact_ copy of the original VM, down to the memory contents. Because of this, processes like dev servers are already started in the cloned VM.

<Callout emoji="üí°">Tip: you can start a Postgres database on the `main` branch, seed some data in it, and then every new branch created from `main` will have that data available.</Callout>

As we move into the environment setup, you will see the seamless branching in action

### Environment setup


![Setup Devtool](../images/setup-devtool.png)

If this is your first time setting up this repository in CodeSandbox, you should notice an onboarding tool in the devtool window. 
We highly recommend completing the setup steps, but if for any reason, you don't finish and want to find this tool again, you can see the option header

![Setup Button](../images/setup-button.png)

#### About the environment setup

When you run your repository in CodeSandbox, you are running it on Micro Virtual Machine (VM). This means that we need some basic configuration to set the environment on which your repository will run. To do this, we take advantage of the open source [Development Containers](https://containers.dev/). 

In this section, we will walk through how to identify the best environment for your project and explain how each of the steps work together to create an automatic setup process for everyone accessing your repository in the future. 

#### Step 1: select the environment 
When importing a repository for the first time, CodeSandbox will examine the files in the repo to determine the environment that it is running on. CodeSandbox will also check to see if the repository has pre-existing configuration files that can be used to run the repository. 

Based on the findings, you will see a few options to choose from. 

![Step 1](../images/setup-step-1.png)

The auto-detected environment is a DevContainer template that is likely to work for your repository. If you want to configure your own DevContainer, you can use our DevContainer wizard to select a [template](https://containers.dev/implementors/templates/) and add [features](https://containers.dev/implementors/features/) as needed to customize your DevContainer image. 

![Step 1](../images/setup-step-1-2.png)

#### Step 2: select setup tasks

Setup tasks are a list of terminal commands that run when a VM boots or when a new commit comes in on a protected branch (like `main`). 
In this setup you can select which terminal commands you would like to automatically run when booting a VM. By setting these tasks, you'll ensure that the environment works by default. Other developers won't have to figure out what setup to do, or what commands to run to get started.

<Callout emoji="‚≠ê">Tasks are not started as your user, but by a global user named `pitcher-host`.</Callout>

![Step 2](../images/setup-step-2.png)

In this example, we auto-detected `yarn install` as a likely command from the `package.json` file. 

A **run** command is the terminal command to run the project, in this case we will run `yarn run dev` to spin up the dev environment.

<Callout emoji="‚≠ê">During the final step, this setting will generate a `tasks.json` file. There are many more ways to use this file for advanced configuration that are described [here](./task)</Callout>

#### Step 3: set environment variables

![Step 3](../images/setup-step-3.png)

Several repositories require setting environment variables‚Äîeither to connect to an external service or as the configuration of the environment itself.

These environment variables will be encrypted and stored in our database. After you've set the environment variables, they will be available for any branch in the repository after a restart. 

You can learn more about our environment variable support under [Secrets](/learn/environment/secrets).

<Callout emoji="‚≠ê">If there is a `.env.example` file in the repository, this step will reference the variable names to help you determine which variables shold be added.</Callout>


#### Step 4: run your setup
In this step you can review your setup steps and make changes before running the environment. Once you have run your setup steps, you should see some new files added to your branch. After you have read through the files and adjusted final details, you are ready to commit your changes and create your first PR. 

![Step 4](../images/setup-step-4.png)

You can do this either by clicking ‚ÄúCreate PR‚Äù in the header or commit from the Git panel in the sidebar.

<Callout emoji="‚ö†Ô∏è">New branches are not automatically created on GitHub. We only push the branch to GitHub when you create a commit or rename the branch.</Callout>


### Environment Configuration
// Joji to do






### VS Code Configuration

CodeSandbox supports opening branches in [VS Code](https://marketplace.visualstudio.com/items?itemName=CodeSandbox-io.codesandbox-projects) and in our [native iOS app](https://apps.apple.com/us/app/codesandbox/id1423330822). When you open the branch inside VS Code, you will have access to your own extensions, keybindings and themes.

<Callout emoji="‚≠ê">VS Code and iOS also have live collaboration across different editors. This means that you'll be able to work together with someone who has the same branch open inside the web editor.</Callout>

If you want to configure default VS Code extensions to be installed for your repository, you can create a new file called `.vscode/recommendations.json`.

This is an example of how this file could look like:

```json
{
  "recommendations": ["esbenp.prettier-vscode", "dbaeumer.vscode-eslint"]
}
```

When someone opens this VM in VS Code, we'll make sure that the extensions are preinstalled.

If you want to have some personal extensions available in any CodeSandbox branch, you can update your own VS Code settings to reflect this. In your VS Code settings (we recommend opening the JSON version by clicking on the File icon in the top left), you can add these settings, for example, to automatically install these extensions when connecting to a VM:

```json
  "remote.SSH.defaultExtensions": [
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "GitHub.vscode-pull-request-github",
    "GitHub.copilot",
    "eamodio.gitlens"
  ]
```

### Deployment Previews & GitHub App

Now that you've configured your repository to work in CodeSandbox, we highly recommend that you also configure deployment previews.

With deployment previews, CodeSandbox automatically adds a link to every PR you open, allowing anyone with access to the repo to open the PR on a preloaded development environment running in CodeSandbox. This is great for reviewing changes, testing the application, or quickly making changes to a PR.

To enable deployment previews, you need to install the CodeSandbox GitHub App. You can do this by opening the command palette (<kbd>‚åò</kbd>/<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd>) and selecting ‚ÄúInstall GitHub App‚Äù.

After you've gone through the install steps, you should automatically get deployments for new PRs with a link to both the preview (if configured through tasks) and the development environment!

There are more advantages to using the CodeSandbox GitHub App, like automatic dashboard syncing. You can learn more about this under [GitHub App](/learn/integrations/github-app).

## Troubleshooting
   
#### **Permission errors while importing a project**
    
- Verify your team's permission to open CodeSandbox Repositories.

- Verify your **repository permissions on GitHub**. 
You need to have `write` permission on GitHub to be able to import the project. Repositories where you only have `read` access can only be forked.

- Verify your **GitHub permissions**. 
CodeSandbox requires full git access to be able to import and commit. If you face any authentication errors, follow the steps listed below to reset your GitHub permissions.
    
#### **Resetting GitHub permissions**

1. Go to the **[Dashboard](https://codesandbox.io/dashboard)**.

1. Click on the **Menu icon** at the top right of the screen.

1. Click on **Preferences**.

![Preferences Dropdown Menu Point on CodeSandbox Dashboard](../images/menu-preferences.png)
  
4. Go to **Integrations**. 

5. **Sign out from GitHub and sign in again** to reconnect your GitHub account. 
  
#### **Invalid authorization code on Firefox and Safari**
    
Safari and Firefox block popups by default. Please make sure you give the domain permission (through the browser settings) or refresh the page after you opened the popup and try again.