---
title: Connect
description: Learn how to connect to a sandbox with the CodeSandbox SDK.
---

import { Callout } from 'nextra-theme-docs'

# Connect

The default session for a Sandbox is a WebSocket connection. This connection is designed to hold a session over time with minimum overhead to message passing. The WebSocket connection also allows you to listen to changes to ports, shell output etc.

```ts
const sandbox = await sdk.sandbox.create()
const session = await sandbox.connect()

await session.fs.writeTextFile('test.txt', 'Hello World');
```

## Connect in Browser

Connecting to a Sandbox in the browser requires some collaboration with your server. Create an endpoint that will resume the sandbox and create a browser session:

```ts
export const GET = async ({ params }) => {
  const sandbox = await sdk.sandbox.resume(params.sandboxId);
  const session = await sandbox.createBrowserSession();

  return session
}
```

And in the browser:

```ts
import { connectToSandbox } from '@codesandbox/sdk/browser';

const session = await connectToSandbox({
  getSession: () => fetch(`/api/sandboxes/123`).then(res => res.json())
});

await session.fs.writeTextFile('test.txt', 'Hello World');
```

The Browser sessions automatically manages the connection and will reconnect if the connection is lost. This is controlled by an option called `onFocusChange`.

```ts
const session = await connectToSandbox({
  getSession: () => fetch(`/api/sandboxes/123`).then(res => res.json()),
  onFocusChange: (notify) => {
    const onVisibilityChange = () => {
      notify(document.visibilityState === 'visible');
    }

    document.addEventListener('visibilitychange', onVisibilityChange);

    return () => {
      document.removeEventListener('visibilitychange', onVisibilityChange);
    }
  }
});
```

By telling the browser session when it is in focus it will automatically reconnect when hibernated, unless you explicitly disconnected the session.

While the `connectToSandbox` promise is resolving you can also listen to initialization events to show a loading state:

```ts
const session = await connectToSandbox({
  getSession: () => fetch(`/api/sandboxes/123`).then(res => res.json()),
  onInitCb: (event) => {}
});
```

## Disconnecting the Session

Disconnecting the session will end the session and automatically hibernate the sandbox after a timeout.

```ts
const sandbox = await sdk.sandbox.resume('sandbox-id')
const session = await sandbox.connect()

await session.disconnect();
```
